<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E1: ç¶œåˆæ‡‰ç”¨èˆ‡å„ªåŒ– | APCS å¤ªç©ºæ¢éšªèª²ç¨‹</title>
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/lesson.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&family=Fira+Code:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
</head>
<body>
    <!-- æ˜Ÿç©ºèƒŒæ™¯ -->
    <canvas id="starfield" class="starfield"></canvas>
    
    <!-- å°èˆªæ¬„ -->
    <nav class="lesson-nav glass">
        <div class="nav-content">
            <a href="../../index.html" class="back-btn">
                <span>â†</span>
                <span>è¿”å›èª²ç¨‹åœ°åœ–</span>
            </a>
            <div class="lesson-progress">
                <span class="progress-text">L5 - E1</span>
            </div>
            <div class="lesson-nav-buttons">
                <a href="../L4/D3.html" class="nav-btn prev-btn" >ä¸Šä¸€èª²</a>
                <a href="" class="nav-btn next-btn" style="opacity: 0.5; pointer-events: none;">ä¸‹ä¸€èª²</a>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å…§å®¹ -->
    <main class="lesson-container">
        <!-- å´é‚Šæ¬„ç›®éŒ„ -->
        <aside class="lesson-sidebar glass">
            <h3 class="sidebar-title">ğŸ“‹ æœ¬èª²å…§å®¹</h3>
            <nav class="sidebar-nav">
                <a href="#mission" class="sidebar-link active">ğŸš€ ä»»å‹™èƒŒæ™¯</a>
                <a href="#knowledge" class="sidebar-link">ğŸ“š çŸ¥è­˜é»èªªæ˜</a>
                <a href="#examples" class="sidebar-link">ğŸ’» ç¯„ä¾‹ç¨‹å¼ç¢¼</a>
                <a href="#explanation" class="sidebar-link">ğŸ” ç¨‹å¼ç¢¼è§£èªª</a>
                <a href="#quiz" class="sidebar-link">ğŸ“ Quiz</a>
                <a href="#solution" class="sidebar-link">âœ… è§£ç­”</a>
            </nav>
        </aside>

        <!-- èª²ç¨‹å…§å®¹ -->
        <article class="lesson-content">
            <!-- èª²ç¨‹æ¨™é¡Œ -->
            <header class="lesson-header">
                <div class="lesson-badge">
                    <span class="badge-icon">â­</span>
                    <span class="badge-text">L5: çµ‚æ¥µæŒ‘æˆ°</span>
                </div>
                <h1 class="lesson-title text-glow">
                    E1: çµ‚æ¥µæŒ‘æˆ°ï¼šå‹•æ…‹è¦åŠƒèˆ‡æœ€ä½³åŒ–
                </h1>
                <div class="lesson-meta">
                    <span class="meta-item">â±ï¸ é è¨ˆæ™‚é–“ï¼š8-10 å°æ™‚</span>
                    <span class="meta-item">ğŸ¯ ç›®æ¨™ç´šåˆ†ï¼š5 ç´šåˆ†</span>
                    <span class="meta-item">ğŸ“Š é›£åº¦ï¼šâ­â­â­â­â­</span>
                </div>
            </header>

            <!-- ä»»å‹™èƒŒæ™¯ -->
            <section id="mission" class="content-section">
                <h2 class="section-heading">
                    <span class="heading-icon">ğŸš€</span>
                    <span>ä»»å‹™èƒŒæ™¯</span>
                </h2>
                <div class="content-box glass">
                    <p>ä½ å·²ç¶“å®Œæˆäº†å¾æœˆçƒåˆ°å†¥ç‹æ˜Ÿçš„æ¼«é•·æ—…ç¨‹ï¼ç¾åœ¨é¢è‡¨æœ€çµ‚æŒ‘æˆ°ï¼šè³‡æºæœ€ä½³åŒ–å•é¡Œã€‚åœ¨å¤ªç©ºæ¢éšªä¸­ï¼Œè³‡æºï¼ˆç‡ƒæ–™ã€æ°§æ°£ã€æ™‚é–“ï¼‰éƒ½æ¥µå…¶å¯¶è²´ï¼Œä½ éœ€è¦æ‰¾åˆ°ã€Œæœ€å„ªè§£ã€è€Œä¸åƒ…åƒ…æ˜¯ã€Œå¯è¡Œè§£ã€ã€‚</p>
å‹•æ…‹è¦åŠƒï¼ˆDynamic Programming, DPï¼‰æ˜¯è§£æ±ºæœ€ä½³åŒ–å•é¡Œçš„çµ‚æ¥µæ­¦å™¨ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š
<ul>
<li><strong>è¨˜ä½éå»</strong>ï¼šé¿å…é‡è¤‡è¨ˆç®—</li>
<li><strong>å¾å°åˆ°å¤§</strong>ï¼šç”¨å°å•é¡Œçš„è§£æ§‹å»ºå¤§å•é¡Œçš„è§£</li>
</ul>
                </div>
            </section>

            <!-- çŸ¥è­˜é»èªªæ˜ -->
            <section id="knowledge" class="content-section">
                <h2 class="section-heading">
                    <span class="heading-icon">ğŸ“š</span>
                    <span>çŸ¥è­˜é»èªªæ˜</span>
                </h2>
                <div class="content-box glass">
                    <h3>ä»€éº¼æ˜¯å‹•æ…‹è¦åŠƒï¼Ÿ</h3>
å‹•æ…‹è¦åŠƒé©ç”¨æ–¼å…·æœ‰ä»¥ä¸‹ç‰¹æ€§çš„å•é¡Œï¼š
<ol>
<li><strong>æœ€å„ªå­çµæ§‹</strong>ï¼šå¤§å•é¡Œçš„æœ€å„ªè§£åŒ…å«å°å•é¡Œçš„æœ€å„ªè§£</li>
<li><strong>é‡ç–Šå­å•é¡Œ</strong>ï¼šç›¸åŒçš„å­å•é¡Œæœƒè¢«å¤šæ¬¡è¨ˆç®—</li>
</ol>
<h3>DP çš„å…©ç¨®æ–¹æ³•</h3>
<strong>1. Top-Downï¼ˆè¨˜æ†¶åŒ–éè¿´ï¼‰</strong>
<pre><code class="language-python">memo = {}
def dp(n):
    if n in memo:
        return memo[n]
    
    # è¨ˆç®—
    result = ...
    memo[n] = result
    return result
</code></pre>
<strong>2. Bottom-Upï¼ˆè¿­ä»£å¡«è¡¨ï¼‰</strong>
<pre><code class="language-python">dp = [0] * (n + 1)
dp[0] = base_case
for i in range(1, n + 1):
    dp[i] = ...  # æ ¹æ“šä¹‹å‰çš„å€¼è¨ˆç®—
</code></pre>
<h3>ç¶“å…¸ DP å•é¡Œé¡å‹</h3>
<ol>
<li><strong>è¨ˆæ•¸å‹</strong>ï¼šæœ‰å¤šå°‘ç¨®æ–¹æ³•ï¼Ÿ</li>
<li><strong>æœ€å„ªåŒ–</strong>ï¼šæœ€å¤§/æœ€å°å€¼æ˜¯å¤šå°‘ï¼Ÿ</li>
<li><strong>å­˜åœ¨æ€§</strong>ï¼šæ˜¯å¦å¯èƒ½ï¼Ÿ</li>
<li><strong>è·¯å¾‘å•é¡Œ</strong>ï¼šæœ€ä½³è·¯å¾‘æ˜¯ä»€éº¼ï¼Ÿ</li>
</ul>
                </div>
            </section>

            <!-- ç¯„ä¾‹ç¨‹å¼ç¢¼ -->
            <section id="examples" class="content-section">
                <h2 class="section-heading">
                    <span class="heading-icon">ğŸ’»</span>
                    <span>ç¯„ä¾‹ç¨‹å¼ç¢¼</span>
                </h2>
                <div class="content-box glass">
                    <h3>ç¯„ä¾‹ 1ï¼šçˆ¬æ¨“æ¢¯ï¼ˆå…¥é–€ DPï¼‰</h3>
<pre><code class="language-python">import sys
<p>def climb_stairs(n):
    """
    çˆ¬ n éšæ¨“æ¢¯ï¼Œæ¯æ¬¡å¯ä»¥çˆ¬ 1 æˆ– 2 éš
    å•ï¼šæœ‰å¤šå°‘ç¨®çˆ¬æ³•ï¼Ÿ
    """
    if n <= 2:
        return n
    
    # dp[i] = çˆ¬åˆ°ç¬¬ i éšçš„æ–¹æ³•æ•¸
    dp = [0] * (n + 1)
    dp[1] = 1  # 1 éšï¼š1 ç¨®æ–¹æ³•
    dp[2] = 2  # 2 éšï¼š2 ç¨®æ–¹æ³•ï¼ˆ1+1 æˆ– 2ï¼‰
    
    for i in range(3, n + 1):
        # å¯ä»¥å¾ç¬¬ i-1 éšçˆ¬ 1 éšï¼Œæˆ–å¾ç¬¬ i-2 éšçˆ¬ 2 éš
        dp[i] = dp[i-1] + dp[i-2]
    
    return dp[n]</p>
<p># ä»»å‹™ï¼šè¨ˆç®—ç™»ä¸Šå¤ªç©ºç«™çš„æ–¹æ³•æ•¸
n = int(sys.stdin.readline())
result = climb_stairs(n)</p>
print(f"ç™»ä¸Š {n} éšå¤ªç©ºç«™çš„æ–¹æ³•æ•¸ï¼š{result}")
</code></pre>
<h3>ç¯„ä¾‹ 2ï¼šèƒŒåŒ…å•é¡Œï¼ˆç¶“å…¸ DPï¼‰</h3>
<pre><code class="language-python">import sys
<p>def knapsack(weights, values, capacity):
    """
    0/1 èƒŒåŒ…å•é¡Œï¼šæ¯å€‹ç‰©å“åªèƒ½é¸ä¸€æ¬¡
    weights: ç‰©å“é‡é‡åˆ—è¡¨
    values: ç‰©å“åƒ¹å€¼åˆ—è¡¨
    capacity: èƒŒåŒ…å®¹é‡
    è¿”å›ï¼šæœ€å¤§åƒ¹å€¼
    """
    n = len(weights)
    
    # dp[i][w] = å‰ i å€‹ç‰©å“ï¼Œå®¹é‡ç‚º w æ™‚çš„æœ€å¤§åƒ¹å€¼
    dp = [[0 for _ in range(capacity + 1)] for _ in range(n + 1)]
    
    for i in range(1, n + 1):
        for w in range(capacity + 1):
            # é¸æ“‡ 1ï¼šä¸æ‹¿ç¬¬ i å€‹ç‰©å“
            dp[i][w] = dp[i-1][w]
            
            # é¸æ“‡ 2ï¼šæ‹¿ç¬¬ i å€‹ç‰©å“ï¼ˆå¦‚æœæ”¾å¾—ä¸‹ï¼‰
            if w >= weights[i-1]:
                dp[i][w] = max(dp[i][w], 
                              dp[i-1][w - weights[i-1]] + values[i-1])
    
    return dp[n][capacity]</p>
<p># ä»»å‹™ï¼šé¸æ“‡è¦å¸¶ä¸Šå¤ªç©ºèˆ¹çš„ç§‘å­¸å„€å™¨
n = int(sys.stdin.readline())  # å„€å™¨æ•¸é‡
capacity = int(sys.stdin.readline())  # è¼‰é‡é™åˆ¶</p>
<p>weights = []
values = []</p>
<p>print("å¯ç”¨å„€å™¨ï¼š")
for i in range(n):
    w, v = map(int, sys.stdin.readline().strip().split())
    weights.append(w)
    values.append(v)
    print(f"å„€å™¨ {i+1}: é‡é‡ {w} kg, åƒ¹å€¼ {v}")</p>
max_value = knapsack(weights, values, capacity)
print(f"\nè¼‰é‡é™åˆ¶ï¼š{capacity} kg")
print(f"æœ€å¤§ç¸½åƒ¹å€¼ï¼š{max_value}")
</code></pre>
<h3>ç¯„ä¾‹ 3ï¼šæœ€é•·éå¢å­åºåˆ—ï¼ˆLISï¼‰</h3>
<pre><code class="language-python">import sys
<p>def longest_increasing_subsequence(arr):
    """
    æ‰¾å‡ºæœ€é•·éå¢å­åºåˆ—çš„é•·åº¦
    """
    if not arr:
        return 0
    
    n = len(arr)
    # dp[i] = ä»¥ arr[i] çµå°¾çš„æœ€é•·éå¢å­åºåˆ—é•·åº¦
    dp = [1] * n
    
    for i in range(1, n):
        for j in range(i):
            if arr[j] < arr[i]:
                dp[i] = max(dp[i], dp[j] + 1)
    
    return max(dp)</p>
<p>def lis_with_path(arr):
    """è¿”å› LIS é•·åº¦å’Œå¯¦éš›åºåˆ—"""
    if not arr:
        return 0, []
    
    n = len(arr)
    dp = [1] * n
    parent = [-1] * n  # è¨˜éŒ„å‰ä¸€å€‹å…ƒç´ çš„ç´¢å¼•
    
    for i in range(1, n):
        for j in range(i):
            if arr[j] < arr[i] and dp[j] + 1 > dp[i]:
                dp[i] = dp[j] + 1
                parent[i] = j
    
    # æ‰¾å‡ºæœ€é•·åºåˆ—çš„çµå°¾
    max_length = max(dp)
    max_idx = dp.index(max_length)
    
    # é‡å»ºè·¯å¾‘
    path = []
    idx = max_idx
    while idx != -1:
        path.append(arr[idx])
        idx = parent[idx]
    
    path.reverse()
    return max_length, path</p>
<p># ä»»å‹™ï¼šæ‰¾å‡ºèƒ½é‡è®€æ•¸çš„æœ€é•·ä¸Šå‡è¶¨å‹¢
n = int(sys.stdin.readline())
readings = list(map(int, sys.stdin.readline().strip().split()))</p>
<p>length, sequence = lis_with_path(readings)</p>
print(f"èƒ½é‡è®€æ•¸ï¼š{readings}")
print(f"æœ€é•·ä¸Šå‡è¶¨å‹¢é•·åº¦ï¼š{length}")
print(f"è¶¨å‹¢åºåˆ—ï¼š{sequence}")
</code></pre>
<h3>ç¯„ä¾‹ 4ï¼šç·¨è¼¯è·é›¢ï¼ˆå­—ä¸² DPï¼‰</h3>
<pre><code class="language-python">import sys
<p>def edit_distance(s1, s2):
    """
    è¨ˆç®—å°‡ s1 è½‰æ›ç‚º s2 çš„æœ€å°‘æ“ä½œæ¬¡æ•¸
    æ“ä½œï¼šæ’å…¥ã€åˆªé™¤ã€æ›¿æ›
    """
    m, n = len(s1), len(s2)
    
    # dp[i][j] = s1[0:i] è½‰æ›ç‚º s2[0:j] çš„æœ€å°‘æ“ä½œæ•¸
    dp = [[0 for _ in range(n + 1)] for _ in range(m + 1)]
    
    # åˆå§‹åŒ–ï¼šç©ºå­—ä¸²çš„è½‰æ›
    for i in range(m + 1):
        dp[i][0] = i  # åˆªé™¤ i å€‹å­—å…ƒ
    for j in range(n + 1):
        dp[0][j] = j  # æ’å…¥ j å€‹å­—å…ƒ
    
    for i in range(1, m + 1):
        for j in range(1, n + 1):
            if s1[i-1] == s2[j-1]:
                # å­—å…ƒç›¸åŒï¼Œä¸éœ€è¦æ“ä½œ
                dp[i][j] = dp[i-1][j-1]
            else:
                # ä¸‰ç¨®æ“ä½œå–æœ€å°
                dp[i][j] = 1 + min(
                    dp[i-1][j],    # åˆªé™¤
                    dp[i][j-1],    # æ’å…¥
                    dp[i-1][j-1]   # æ›¿æ›
                )
    
    return dp[m][n]</p>
<p># ä»»å‹™ï¼šä¿®æ­£æå£çš„é€šè¨Šè¨Šè™Ÿ
original = sys.stdin.readline().strip()
received = sys.stdin.readline().strip()</p>
<p>distance = edit_distance(original, received)</p>
print(f"åŸå§‹è¨Šè™Ÿï¼š{original}")
print(f"æ¥æ”¶è¨Šè™Ÿï¼š{received}")
print(f"æœ€å°‘éœ€è¦ {distance} æ¬¡ä¿®æ­£")
</code></pre>
<h3>ç¯„ä¾‹ 5ï¼šç¡¬å¹£æ‰¾é›¶ï¼ˆå®Œå…¨èƒŒåŒ…ï¼‰</h3>
<pre><code class="language-python">import sys
<p>def coin_change(coins, amount):
    """
    çµ¦å®šç¡¬å¹£é¢é¡ï¼Œæ‰¾å‡ºæ¹Šæˆ amount çš„æœ€å°‘ç¡¬å¹£æ•¸
    æ¯ç¨®ç¡¬å¹£å¯ä»¥ä½¿ç”¨ç„¡é™æ¬¡
    """
    # dp[i] = æ¹Šæˆé‡‘é¡ i çš„æœ€å°‘ç¡¬å¹£æ•¸
    dp = [float('inf')] * (amount + 1)
    dp[0] = 0  # é‡‘é¡ 0 éœ€è¦ 0 å€‹ç¡¬å¹£
    
    for i in range(1, amount + 1):
        for coin in coins:
            if i >= coin:
                dp[i] = min(dp[i], dp[i - coin] + 1)
    
    return dp[amount] if dp[amount] != float('inf') else -1</p>
<p>def coin_change_ways(coins, amount):
    """è¨ˆç®—æœ‰å¤šå°‘ç¨®æ¹Šæ³•"""
    dp = [0] * (amount + 1)
    dp[0] = 1  # æ¹Šæˆ 0 æœ‰ 1 ç¨®æ–¹æ³•ï¼ˆä¸é¸ï¼‰
    
    for coin in coins:
        for i in range(coin, amount + 1):
            dp[i] += dp[i - coin]
    
    return dp[amount]</p>
<p># ä»»å‹™ï¼šä½¿ç”¨èƒ½é‡æ™¶é«”ç‚ºå¤ªç©ºèˆ¹å……èƒ½
n = int(sys.stdin.readline())  # æ™¶é«”ç¨®é¡
coins = list(map(int, sys.stdin.readline().strip().split()))
amount = int(sys.stdin.readline())  # éœ€è¦çš„èƒ½é‡</p>
<p>min_crystals = coin_change(coins, amount)
ways = coin_change_ways(coins, amount)</p>
<p>print(f"æ™¶é«”é¢é¡ï¼š{coins}")
print(f"éœ€è¦èƒ½é‡ï¼š{amount}")</p>
if min_crystals != -1:
    print(f"æœ€å°‘éœ€è¦ {min_crystals} å€‹æ™¶é«”")
    print(f"å…±æœ‰ {ways} ç¨®çµ„åˆæ–¹å¼")
else:
    print("ç„¡æ³•æ¹Šæˆæ‰€éœ€èƒ½é‡ï¼")
</code></pre>
                </div>
            </section>

            <!-- ç¨‹å¼ç¢¼è§£èªª -->
            <section id="explanation" class="content-section">
                <h2 class="section-heading">
                    <span class="heading-icon">ğŸ”</span>
                    <span>ç¨‹å¼ç¢¼è§£èªª</span>
                </h2>
                <div class="content-box glass">
                    <h3>é—œéµæŠ€è¡“é»</h3>
<ol>
<li><strong>ç‹€æ…‹å®šç¾©</strong></li>
<li>DP æœ€é›£çš„éƒ¨åˆ†ï¼šå®šç¾© <code>dp[i]</code> æˆ– <code>dp[i][j]</code> ä»£è¡¨ä»€éº¼</li>
<li>å¥½çš„ç‹€æ…‹å®šç¾©è®“è½‰ç§»æ–¹ç¨‹å¼è®Šç°¡å–®</li>
</ol>
<ol>
<li><strong>ç‹€æ…‹è½‰ç§»æ–¹ç¨‹</strong></li>
</ol>
   <pre><code class="language-python">   # çˆ¬æ¨“æ¢¯
   dp[i] = dp[i-1] + dp[i-2]
   
   # èƒŒåŒ…
   dp[i][w] = max(dp[i-1][w], dp[i-1][w-weight] + value)
   
   # LIS
   dp[i] = max(dp[j] + 1) for all j < i where arr[j] < arr[i]
   </code></pre>
<ol>
<li><strong>åˆå§‹åŒ–</strong></li>
</ol>
   <pre><code class="language-python">   # åŸºç¤æƒ…æ³å¿…é ˆæ­£ç¢º
   dp[0] = 0  # æˆ– 1ï¼Œå–æ±ºæ–¼å•é¡Œ
   </code></pre>
<ol>
<li><strong>ç©ºé–“å„ªåŒ–</strong></li>
</ol>
   <pre><code class="language-python">   # å¦‚æœåªéœ€è¦å‰ä¸€è¡Œçš„æ•¸æ“šï¼Œå¯ä»¥ç”¨æ»¾å‹•é™£åˆ—
   # å°‡ O(NÂ²) ç©ºé–“å„ªåŒ–ç‚º O(N)
   </code></pre>
                </div>
            </section>

            <!-- Quiz -->
            <section id="quiz" class="content-section">
                <h2 class="section-heading">
                    <span class="heading-icon">ğŸ“</span>
                    <span>Quiz: æ˜Ÿéš›è²¿æ˜“æœ€ä½³åŒ–</span>
                </h2>
                <div class="quiz-box glass">
                    <h3>é¡Œç›®ï¼šæœ€å¤§åˆ©æ½¤è·¯å¾‘</h3>
<p>ä½ è¦å¾åœ°çƒï¼ˆä½ç½® 0ï¼‰é£›åˆ°å†¥ç‹æ˜Ÿï¼ˆä½ç½® N-1ï¼‰ï¼Œé€”ä¸­ç¶“é N å€‹å¤ªç©ºç«™ã€‚æ¯å€‹å¤ªç©ºç«™éƒ½æœ‰ä¸€å€‹ã€Œè²¿æ˜“æŒ‡æ•¸ã€ï¼ˆå¯èƒ½ç‚ºè² ï¼Œè¡¨ç¤ºéœ€è¦æ”¯ä»˜éè·¯è²»ï¼‰ã€‚</p>
ä½ å¯ä»¥é¸æ“‡ï¼š
<ol>
<li>åœ¨ç•¶å‰å¤ªç©ºç«™é€²è¡Œè²¿æ˜“ï¼ˆç²å¾—è©²ç«™çš„è²¿æ˜“æŒ‡æ•¸ï¼‰</li>
<li>è·³éç•¶å‰å¤ªç©ºç«™</li>
</ol>
<p>ä½†æœ‰ä¸€å€‹é™åˆ¶ï¼š<strong>ä¸èƒ½é€£çºŒè·³éè¶…é K å€‹å¤ªç©ºç«™</strong>ï¼ˆå¿…é ˆå®šæœŸè£œçµ¦ï¼‰ã€‚</p>
<p>è«‹æ‰¾å‡ºèƒ½ç²å¾—çš„æœ€å¤§ç¸½åˆ©æ½¤ã€‚</p>
<strong>è¼¸å…¥æ ¼å¼ï¼š</strong>
<ul>
<li>ç¬¬ä¸€è¡Œï¼šN Kï¼ˆå¤ªç©ºç«™æ•¸é‡ï¼Œæœ€å¤§é€£çºŒè·³éæ•¸ï¼‰</li>
<li>ç¬¬äºŒè¡Œï¼šN å€‹æ•´æ•¸ï¼Œä»£è¡¨æ¯å€‹å¤ªç©ºç«™çš„è²¿æ˜“æŒ‡æ•¸</li>
</ul>
<strong>è¼¸å…¥ç¯„ä¾‹ï¼š</strong>
<pre><code class="language-python">6 2
5 -3 8 -2 6 4
</code></pre>
<strong>è¼¸å‡ºç¯„ä¾‹ï¼š</strong>
<pre><code class="language-python">æœ€å¤§åˆ©æ½¤ï¼š23
é¸æ“‡çš„å¤ªç©ºç«™ï¼š[0, 2, 4, 5]
è·¯å¾‘ï¼š5 â†’ (è·³é) â†’ 8 â†’ (è·³é) â†’ 6 â†’ 4
</code></pre>
<h3>ğŸ’¡ æç¤º</h3>
<ul>
<li>å®šç¾© <code>dp[i]</code> = åˆ°é”ç¬¬ i å€‹å¤ªç©ºç«™æ™‚çš„æœ€å¤§åˆ©æ½¤</li>
<li>è€ƒæ…®å¾å“ªå€‹ä¹‹å‰çš„å¤ªç©ºç«™éä¾†ï¼ˆæœ€å¤šè·³é K å€‹ï¼‰</li>
</ul>
<p>---</p>
                    <button class="show-solution-btn" onclick="toggleSolution()">
                        ğŸ’¡ æŸ¥çœ‹è§£ç­”
                    </button>
                </div>
            </section>

            <!-- è§£ç­” -->
            <section id="solution" class="content-section solution-hidden">
                <h2 class="section-heading">
                    <span class="heading-icon">âœ…</span>
                    <span>Quiz è§£ç­”</span>
                </h2>
                <div class="solution-box glass">
                    <pre><code class="language-python">import sys
<p>def max_profit_path(profits, k):
    """
    æ‰¾å‡ºæœ€å¤§åˆ©æ½¤è·¯å¾‘
    profits: æ¯å€‹å¤ªç©ºç«™çš„è²¿æ˜“æŒ‡æ•¸
    k: æœ€å¤§é€£çºŒè·³éæ•¸
    """
    n = len(profits)
    
    # dp[i] = åˆ°é”ç¬¬ i å€‹å¤ªç©ºç«™æ™‚çš„æœ€å¤§åˆ©æ½¤
    dp = [float('-inf')] * n
    parent = [-1] * n  # è¨˜éŒ„è·¯å¾‘
    
    # åˆå§‹åŒ–ï¼šç¬¬ä¸€å€‹å¤ªç©ºç«™
    dp[0] = profits[0]
    
    for i in range(1, n):
        # å˜—è©¦å¾ä¹‹å‰çš„ k+1 å€‹å¤ªç©ºç«™éä¾†
        for j in range(max(0, i - k - 1), i):
            if dp[j] + profits[i] > dp[i]:
                dp[i] = dp[j] + profits[i]
                parent[i] = j
    
    # æ‰¾å‡ºæœ€å¾Œä¸€å€‹å¤ªç©ºç«™çš„æœ€å¤§åˆ©æ½¤
    max_profit = dp[n-1]
    
    # é‡å»ºè·¯å¾‘
    path = []
    idx = n - 1
    while idx != -1:
        path.append(idx)
        idx = parent[idx]
    path.reverse()
    
    return max_profit, path</p>
<p># è®€å–è¼¸å…¥
n, k = map(int, sys.stdin.readline().strip().split())
profits = list(map(int, sys.stdin.readline().strip().split()))</p>
<p>max_profit, path = max_profit_path(profits, k)</p>
<p>print(f"æœ€å¤§åˆ©æ½¤ï¼š{max_profit}")
print(f"é¸æ“‡çš„å¤ªç©ºç«™ï¼š{path}")</p>
<p># é¡¯ç¤ºè·¯å¾‘
path_str = []
for i in range(len(path)):
    path_str.append(str(profits[path[i]]))
    if i < len(path) - 1:
        skipped = path[i+1] - path[i] - 1
        if skipped > 0:
            path_str.append(f"(è·³é {skipped} å€‹)")
        path_str.append("â†’")</p>
print(f"è·¯å¾‘ï¼š{' '.join(path_str)}")
</code></pre>
<h3>è§£ç­”èªªæ˜</h3>
<ol>
<li><strong>ç‹€æ…‹å®šç¾©</strong></li>
</ol>
   <pre><code class="language-python">   dp[i] = åˆ°é”ç¬¬ i å€‹å¤ªç©ºç«™æ™‚çš„æœ€å¤§åˆ©æ½¤
   </code></pre>
<ol>
<li><strong>è½‰ç§»æ–¹ç¨‹</strong></li>
</ol>
   <pre><code class="language-python">   # å¾ç¬¬ j å€‹å¤ªç©ºç«™è·³åˆ°ç¬¬ i å€‹
   # æ¢ä»¶ï¼ši - j - 1 <= kï¼ˆä¸­é–“è·³éçš„æ•¸é‡ä¸è¶…é kï¼‰
   dp[i] = max(dp[j] + profits[i]) for all valid j
   </code></pre>
<ol>
<li><strong>è·¯å¾‘é‡å»º</strong></li>
</ol>
   <pre><code class="language-python">   parent[i] = j  # è¨˜éŒ„æ˜¯å¾å“ªå€‹å¤ªç©ºç«™ä¾†çš„
   
   # å¾çµ‚é»å›æº¯åˆ°èµ·é»
   while idx != -1:
       path.append(idx)
       idx = parent[idx]
   </code></pre>
<h3>æ™‚é–“è¤‡é›œåº¦åˆ†æ</h3>
<ul>
<li>æ™‚é–“è¤‡é›œåº¦ï¼šO(N Ã— K) - æ¯å€‹ä½ç½®æœ€å¤šæª¢æŸ¥ K+1 å€‹å‰é©…</li>
<li>ç©ºé–“è¤‡é›œåº¦ï¼šO(N) - å„²å­˜ DP é™£åˆ—å’Œè·¯å¾‘</li>
<li>å¯ä»¥é€²ä¸€æ­¥å„ªåŒ–ç‚º O(N log K) ä½¿ç”¨å„ªå…ˆä½‡åˆ—</li>
</ul>
<p>---</p>
                </div>
            </section>

            <!-- å®Œæˆå¾½ç«  -->
            <div class="completion-badge glass">
                <div class="badge-content">
                    <span class="badge-icon">ğŸ‰</span>
                    <h3>è¨“ç·´å®Œæˆï¼</h3>
                    <p>æ­å–œä½ å®Œæˆ ç¶œåˆæ‡‰ç”¨èˆ‡å„ªåŒ– è¨“ç·´ï¼</p>
                </div>
            </div>

            <!-- å°èˆªæŒ‰éˆ• -->
            <div class="lesson-navigation">
                <a href="../L4/D3.html" class="nav-btn prev-btn" >â† ä¸Šä¸€èª²</a>
                <a href="../../index.html" class="nav-btn home-btn">ğŸ  èª²ç¨‹åœ°åœ–</a>
                <a href="" class="nav-btn next-btn" style="opacity: 0.5; pointer-events: none;">ä¸‹ä¸€èª² â†’</a>
            </div>
        </article>
    </main>

    <!-- JavaScript -->
    <script src="../../scripts/starfield.js"></script>
    <script src="../../scripts/lesson.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
</body>
</html>