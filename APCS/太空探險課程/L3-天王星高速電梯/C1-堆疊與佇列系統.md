# C1: å¤©ç‹æ˜Ÿè²¨é‹ç³»çµ±ï¼šå †ç–Šèˆ‡ä½‡åˆ—

## ğŸš€ ä»»å‹™èƒŒæ™¯

æ­¡è¿ä¾†åˆ°å¤©ç‹æ˜Ÿè»Œé“ç«™ï¼é€™è£¡æ˜¯å¤ªé™½ç³»å¤–åœçš„é‡è¦è£œçµ¦ç«™ã€‚ä½ éœ€è¦ç®¡ç†å…©ç¨®ä¸åŒçš„è²¨ç‰©ç³»çµ±ï¼š
- **å †ç–Šç³»çµ±ï¼ˆStackï¼‰**ï¼šå¾Œé€²å…ˆå‡ºï¼ˆLIFOï¼‰ï¼Œåƒä¸€ç–Šç›¤å­
- **ä½‡åˆ—ç³»çµ±ï¼ˆQueueï¼‰**ï¼šå…ˆé€²å…ˆå‡ºï¼ˆFIFOï¼‰ï¼Œåƒæ’éšŠçµå¸³

æŒæ¡é€™å…©ç¨®æ•¸æ“šçµæ§‹æ˜¯æˆç‚ºé«˜ç´šç¨‹å¼è¨­è¨ˆå¸«çš„é—œéµï¼å®ƒå€‘æ˜¯è¨±å¤šé€²éšæ¼”ç®—æ³•çš„åŸºç¤ã€‚

## ğŸ“š çŸ¥è­˜é»èªªæ˜

### å †ç–Šï¼ˆStackï¼‰- å¾Œé€²å…ˆå‡º

æƒ³åƒä¸€ç–Šç›¤å­ï¼šæœ€å¾Œæ”¾ä¸Šå»çš„ç›¤å­ï¼Œæœ€å…ˆè¢«æ‹¿èµ°ã€‚

```
    [3]  â† æœ€å¾Œé€²å…¥ï¼Œæœ€å…ˆé›¢é–‹
    [2]
    [1]  â† æœ€å…ˆé€²å…¥ï¼Œæœ€å¾Œé›¢é–‹
   -----
```

**åŸºæœ¬æ“ä½œï¼š**
- `push(x)`ï¼šå°‡å…ƒç´  x æ”¾åˆ°é ‚éƒ¨
- `pop()`ï¼šç§»é™¤ä¸¦è¿”å›é ‚éƒ¨å…ƒç´ 
- `peek()`ï¼šæŸ¥çœ‹é ‚éƒ¨å…ƒç´ ï¼ˆä¸ç§»é™¤ï¼‰
- `is_empty()`ï¼šæª¢æŸ¥æ˜¯å¦ç‚ºç©º

### ä½‡åˆ—ï¼ˆQueueï¼‰- å…ˆé€²å…ˆå‡º

æƒ³åƒæ’éšŠï¼šæœ€å…ˆæ’éšŠçš„äººï¼Œæœ€å…ˆè¢«æœå‹™ã€‚

```
å‡ºå£ â† [1] [2] [3] â† å…¥å£
      æœ€å…ˆé€²å…¥    æœ€å¾Œé€²å…¥
```

**åŸºæœ¬æ“ä½œï¼š**
- `enqueue(x)`ï¼šå°‡å…ƒç´  x åŠ åˆ°éšŠå°¾
- `dequeue()`ï¼šç§»é™¤ä¸¦è¿”å›éšŠé¦–å…ƒç´ 
- `front()`ï¼šæŸ¥çœ‹éšŠé¦–å…ƒç´ ï¼ˆä¸ç§»é™¤ï¼‰
- `is_empty()`ï¼šæª¢æŸ¥æ˜¯å¦ç‚ºç©º

### Python å¯¦ç¾

**å †ç–Šï¼šä½¿ç”¨ list**
```python
stack = []
stack.append(1)  # push
stack.append(2)
top = stack.pop()  # popï¼Œè¿”å› 2
```

**ä½‡åˆ—ï¼šä½¿ç”¨ collections.deque**
```python
from collections import deque

queue = deque()
queue.append(1)  # enqueue
queue.append(2)
first = queue.popleft()  # dequeueï¼Œè¿”å› 1
```

âš ï¸ **é‡è¦**ï¼šä¸è¦ç”¨ `list.pop(0)` å¯¦ç¾ä½‡åˆ—ï¼æ™‚é–“è¤‡é›œåº¦æ˜¯ O(N)ï¼Œéå¸¸æ…¢ï¼

## ğŸ’» ç¯„ä¾‹ç¨‹å¼ç¢¼

### ç¯„ä¾‹ 1ï¼šè²¨æ«ƒå †ç–Šç®¡ç†

```python
import sys

# ä»»å‹™ï¼šç®¡ç†è²¨æ«ƒå †ç–Š
stack = []

n = int(sys.stdin.readline())  # æ“ä½œæ¬¡æ•¸

for _ in range(n):
    command = sys.stdin.readline().strip().split()
    
    if command[0] == "PUSH":
        container_id = command[1]
        stack.append(container_id)
        print(f"âœ… è²¨æ«ƒ {container_id} å·²å †ç–Š")
        
    elif command[0] == "POP":
        if stack:
            removed = stack.pop()
            print(f"ğŸ“¦ ç§»é™¤è²¨æ«ƒ {removed}")
        else:
            print("âŒ éŒ¯èª¤ï¼šå †ç–Šç‚ºç©º")
            
    elif command[0] == "PEEK":
        if stack:
            print(f"ğŸ‘€ é ‚éƒ¨è²¨æ«ƒï¼š{stack[-1]}")
        else:
            print("âŒ å †ç–Šç‚ºç©º")
            
    elif command[0] == "SIZE":
        print(f"ğŸ“Š å †ç–Šå¤§å°ï¼š{len(stack)}")

print(f"\næœ€çµ‚å †ç–Šï¼š{stack}")
```

### ç¯„ä¾‹ 2ï¼šå¤ªç©ºèˆ¹ç¶­ä¿®ä½‡åˆ—

```python
import sys
from collections import deque

# ä»»å‹™ï¼šç®¡ç†å¤ªç©ºèˆ¹ç¶­ä¿®ä½‡åˆ—
queue = deque()

n = int(sys.stdin.readline())

for _ in range(n):
    command = sys.stdin.readline().strip().split()
    
    if command[0] == "ARRIVE":
        ship_id = command[1]
        queue.append(ship_id)
        print(f"ğŸš€ å¤ªç©ºèˆ¹ {ship_id} åŠ å…¥ç¶­ä¿®ä½‡åˆ—")
        print(f"   ç›®å‰æ’éšŠï¼š{len(queue)} è‰˜")
        
    elif command[0] == "SERVICE":
        if queue:
            serviced = queue.popleft()
            print(f"ğŸ”§ é–‹å§‹ç¶­ä¿®å¤ªç©ºèˆ¹ {serviced}")
        else:
            print("âœ… æ²’æœ‰å¤ªç©ºèˆ¹ç­‰å¾…ç¶­ä¿®")
            
    elif command[0] == "NEXT":
        if queue:
            print(f"ğŸ‘‰ ä¸‹ä¸€è‰˜ï¼š{queue[0]}")
        else:
            print("âŒ ä½‡åˆ—ç‚ºç©º")

print(f"\nç­‰å¾…ç¶­ä¿®ï¼š{list(queue)}")
```

### ç¯„ä¾‹ 3ï¼šæ‹¬è™Ÿé…å°æª¢æŸ¥ï¼ˆç¶“å…¸å †ç–Šæ‡‰ç”¨ï¼‰

```python
import sys

# ä»»å‹™ï¼šæª¢æŸ¥æ‹¬è™Ÿæ˜¯å¦æ­£ç¢ºé…å°
expression = sys.stdin.readline().strip()

stack = []
pairs = {'(': ')', '[': ']', '{': '}'}
valid = True

for i, char in enumerate(expression):
    if char in pairs:  # å·¦æ‹¬è™Ÿ
        stack.append(char)
    elif char in pairs.values():  # å³æ‹¬è™Ÿ
        if not stack:
            print(f"âŒ éŒ¯èª¤ï¼šä½ç½® {i} çš„ '{char}' æ²’æœ‰å°æ‡‰çš„å·¦æ‹¬è™Ÿ")
            valid = False
            break
        
        left = stack.pop()
        if pairs[left] != char:
            print(f"âŒ éŒ¯èª¤ï¼šä½ç½® {i} çš„ '{char}' èˆ‡ '{left}' ä¸åŒ¹é…")
            valid = False
            break

if valid and stack:
    print(f"âŒ éŒ¯èª¤ï¼šé‚„æœ‰ {len(stack)} å€‹å·¦æ‹¬è™Ÿæœªé…å°")
    valid = False

if valid:
    print("âœ… æ‹¬è™Ÿé…å°æ­£ç¢ºï¼")
```

### ç¯„ä¾‹ 4ï¼šé€†æ³¢è˜­è¡¨ç¤ºæ³•è¨ˆç®—å™¨

```python
import sys

# ä»»å‹™ï¼šè¨ˆç®—é€†æ³¢è˜­è¡¨ç¤ºæ³•ï¼ˆå¾Œç¶´è¡¨ç¤ºæ³•ï¼‰
# ä¾‹å¦‚ï¼š3 4 + 5 * è¡¨ç¤º (3 + 4) * 5 = 35
tokens = sys.stdin.readline().strip().split()

stack = []

for token in tokens:
    if token in ['+', '-', '*', '/']:
        # å½ˆå‡ºå…©å€‹æ“ä½œæ•¸
        b = stack.pop()
        a = stack.pop()
        
        # åŸ·è¡Œé‹ç®—
        if token == '+':
            result = a + b
        elif token == '-':
            result = a - b
        elif token == '*':
            result = a * b
        elif token == '/':
            result = a // b  # æ•´æ•¸é™¤æ³•
        
        stack.append(result)
        print(f"è¨ˆç®—ï¼š{a} {token} {b} = {result}")
    else:
        # æ•¸å­—ï¼Œå£“å…¥å †ç–Š
        stack.append(int(token))
        print(f"å£“å…¥ï¼š{token}")

print(f"\næœ€çµ‚çµæœï¼š{stack[0]}")
```

### ç¯„ä¾‹ 5ï¼šæ»‘å‹•çª—å£æœ€å¤§å€¼ï¼ˆé›™ç«¯ä½‡åˆ—é€²éšæ‡‰ç”¨ï¼‰

```python
import sys
from collections import deque

# ä»»å‹™ï¼šæ‰¾å‡ºæ¯å€‹å¤§å°ç‚º k çš„æ»‘å‹•çª—å£ä¸­çš„æœ€å¤§å€¼
n = int(sys.stdin.readline())
k = int(sys.stdin.readline())
arr = list(map(int, sys.stdin.readline().strip().split()))

# ä½¿ç”¨é›™ç«¯ä½‡åˆ—å„²å­˜ç´¢å¼•
dq = deque()
result = []

for i in range(n):
    # ç§»é™¤è¶…å‡ºçª—å£ç¯„åœçš„å…ƒç´ 
    while dq and dq[0] < i - k + 1:
        dq.popleft()
    
    # ç§»é™¤æ‰€æœ‰æ¯”ç•¶å‰å…ƒç´ å°çš„å…ƒç´ ï¼ˆå®ƒå€‘ä¸å¯èƒ½æ˜¯æœ€å¤§å€¼ï¼‰
    while dq and arr[dq[-1]] < arr[i]:
        dq.pop()
    
    # åŠ å…¥ç•¶å‰å…ƒç´ çš„ç´¢å¼•
    dq.append(i)
    
    # ç•¶çª—å£å½¢æˆå¾Œï¼Œè¨˜éŒ„æœ€å¤§å€¼
    if i >= k - 1:
        result.append(arr[dq[0]])

print(f"é™£åˆ—ï¼š{arr}")
print(f"çª—å£å¤§å°ï¼š{k}")
print(f"æ¯å€‹çª—å£çš„æœ€å¤§å€¼ï¼š{result}")
```

## ğŸ” ç¨‹å¼ç¢¼è§£èªª

### é—œéµæŠ€è¡“é»

1. **ç‚ºä»€éº¼ä½‡åˆ—è¦ç”¨ dequeï¼Ÿ**
   
   | æ“ä½œ | list | deque |
   |------|------|-------|
   | å°¾éƒ¨æ·»åŠ  | O(1) | O(1) |
   | å°¾éƒ¨ç§»é™¤ | O(1) | O(1) |
   | é ­éƒ¨æ·»åŠ  | O(N) | O(1) |
   | é ­éƒ¨ç§»é™¤ | O(N) | O(1) |
   
   ä½¿ç”¨ `list.pop(0)` æœƒå°è‡´æ‰€æœ‰å…ƒç´ å‘å‰ç§»å‹•ï¼Œéå¸¸æ…¢ï¼

2. **æ‹¬è™Ÿé…å°çš„é‚è¼¯**
   ```python
   # é‡åˆ°å·¦æ‹¬è™Ÿï¼šå£“å…¥å †ç–Š
   if char in '([{':
       stack.append(char)
   
   # é‡åˆ°å³æ‹¬è™Ÿï¼šæª¢æŸ¥æ˜¯å¦åŒ¹é…
   if char in ')]}':
       if stack and matches(stack[-1], char):
           stack.pop()
       else:
           return False  # ä¸åŒ¹é…
   ```

3. **é€†æ³¢è˜­è¡¨ç¤ºæ³•çš„å„ªå‹¢**
   - ä¸éœ€è¦æ‹¬è™Ÿ
   - è¨ˆç®—æ©Ÿå®¹æ˜“è™•ç†
   - ä½¿ç”¨å †ç–Šå³å¯è¨ˆç®—
   
   ```
   ä¸­ç¶´ï¼š(3 + 4) * 5
   å¾Œç¶´ï¼š3 4 + 5 *
   
   è¨ˆç®—éç¨‹ï¼š
   3 â†’ [3]
   4 â†’ [3, 4]
   + â†’ [7]        (å½ˆå‡º 3,4ï¼Œè¨ˆç®— 3+4ï¼Œå£“å…¥ 7)
   5 â†’ [7, 5]
   * â†’ [35]       (å½ˆå‡º 7,5ï¼Œè¨ˆç®— 7*5ï¼Œå£“å…¥ 35)
   ```

4. **å †ç–Šèˆ‡éè¿´çš„é—œä¿‚**
   - éè¿´æœ¬è³ªä¸Šä½¿ç”¨ç³»çµ±çš„ã€Œå‘¼å«å †ç–Šã€
   - å¯ä»¥ç”¨é¡¯å¼å †ç–Šæ¨¡æ“¬éè¿´
   - é¿å… Python çš„éè¿´æ·±åº¦é™åˆ¶

## ğŸ“ Quizï¼šå¤ªç©ºé›»æ¢¯èª¿åº¦ç³»çµ±

### é¡Œç›®ï¼šé›»æ¢¯è«‹æ±‚è™•ç†

å¤©ç‹æ˜Ÿè»Œé“ç«™æœ‰ä¸€å€‹æ™ºèƒ½é›»æ¢¯ç³»çµ±ã€‚é›»æ¢¯æ¥æ”¶å…©ç¨®è«‹æ±‚ï¼š
- `UP X`ï¼šæœ‰äººåœ¨ç¬¬ X å±¤è¦ä¸Šæ¨“
- `DOWN X`ï¼šæœ‰äººåœ¨ç¬¬ X å±¤è¦ä¸‹æ¨“

é›»æ¢¯ä½¿ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š
1. å…ˆè™•ç†æ‰€æœ‰ä¸Šæ¨“è«‹æ±‚ï¼ˆå¾ä½æ¨“å±¤åˆ°é«˜æ¨“å±¤ï¼‰
2. å†è™•ç†æ‰€æœ‰ä¸‹æ¨“è«‹æ±‚ï¼ˆå¾é«˜æ¨“å±¤åˆ°ä½æ¨“å±¤ï¼‰

è«‹æ¨¡æ“¬é›»æ¢¯çš„é‹è¡Œéç¨‹ã€‚

**è¼¸å…¥æ ¼å¼ï¼š**
- ç¬¬ä¸€è¡Œï¼šæ•´æ•¸ Nï¼ˆè«‹æ±‚æ•¸é‡ï¼Œ1 â‰¤ N â‰¤ 100ï¼‰
- æ¥ä¸‹ä¾† N è¡Œï¼šæ¯è¡Œä¸€å€‹è«‹æ±‚ï¼Œæ ¼å¼ç‚º "UP X" æˆ– "DOWN X"

**è¼¸å…¥ç¯„ä¾‹ï¼š**
```
6
UP 3
DOWN 5
UP 7
DOWN 2
UP 1
DOWN 8
```

**è¼¸å‡ºç¯„ä¾‹ï¼š**
```
è™•ç†ä¸Šæ¨“è«‹æ±‚ï¼š
æ¨“å±¤ 1
æ¨“å±¤ 3
æ¨“å±¤ 7

è™•ç†ä¸‹æ¨“è«‹æ±‚ï¼š
æ¨“å±¤ 8
æ¨“å±¤ 5
æ¨“å±¤ 2

ç¸½å…±æœå‹™ï¼š6 å€‹è«‹æ±‚
```

### ğŸ’¡ æç¤º
- ä½¿ç”¨å…©å€‹åˆ—è¡¨åˆ†åˆ¥å„²å­˜ä¸Šæ¨“å’Œä¸‹æ¨“è«‹æ±‚
- å°åˆ—è¡¨é€²è¡Œæ’åº
- ä¸Šæ¨“è«‹æ±‚å‡åºï¼Œä¸‹æ¨“è«‹æ±‚é™åº

---

## âœ… Quiz è§£ç­”

```python
import sys

# è®€å–è«‹æ±‚æ•¸é‡
n = int(sys.stdin.readline())

# åˆ†åˆ¥å„²å­˜ä¸Šæ¨“å’Œä¸‹æ¨“è«‹æ±‚
up_requests = []
down_requests = []

# è®€å–æ‰€æœ‰è«‹æ±‚
for _ in range(n):
    request = sys.stdin.readline().strip().split()
    direction = request[0]
    floor = int(request[1])
    
    if direction == "UP":
        up_requests.append(floor)
    else:  # DOWN
        down_requests.append(floor)

# æ’åº
up_requests.sort()  # å‡åºï¼šå¾ä½åˆ°é«˜
down_requests.sort(reverse=True)  # é™åºï¼šå¾é«˜åˆ°ä½

# è™•ç†ä¸Šæ¨“è«‹æ±‚
print("è™•ç†ä¸Šæ¨“è«‹æ±‚ï¼š")
for floor in up_requests:
    print(f"æ¨“å±¤ {floor}")

if up_requests:
    print()

# è™•ç†ä¸‹æ¨“è«‹æ±‚
print("è™•ç†ä¸‹æ¨“è«‹æ±‚ï¼š")
for floor in down_requests:
    print(f"æ¨“å±¤ {floor}")

print(f"\nç¸½å…±æœå‹™ï¼š{len(up_requests) + len(down_requests)} å€‹è«‹æ±‚")
```

### è§£ç­”èªªæ˜

1. **åˆ†é¡å„²å­˜**
   ```python
   if direction == "UP":
       up_requests.append(floor)
   else:
       down_requests.append(floor)
   ```
   å°‡è«‹æ±‚åˆ†æˆå…©é¡ï¼Œæ–¹ä¾¿å¾ŒçºŒè™•ç†

2. **æ’åºç­–ç•¥**
   ```python
   up_requests.sort()  # [1, 3, 7]
   down_requests.sort(reverse=True)  # [8, 5, 2]
   ```
   - ä¸Šæ¨“ï¼šå¾ä½åˆ°é«˜ï¼Œç¬¦åˆé›»æ¢¯ä¸Šå‡é‚è¼¯
   - ä¸‹æ¨“ï¼šå¾é«˜åˆ°ä½ï¼Œç¬¦åˆé›»æ¢¯ä¸‹é™é‚è¼¯

3. **ç‚ºä»€éº¼ä¸ç”¨å †ç–Šæˆ–ä½‡åˆ—ï¼Ÿ**
   - é€™é¡Œéœ€è¦ã€Œæ’åºã€å¾Œè™•ç†
   - å †ç–Šå’Œä½‡åˆ—é©åˆã€Œé †åºã€è™•ç†
   - ä½¿ç”¨åˆ—è¡¨ + æ’åºæ›´åˆé©

### é€²éšç‰ˆæœ¬ï¼šä½¿ç”¨å„ªå…ˆä½‡åˆ—

```python
import heapq

# æœ€å°å †ï¼ˆç”¨æ–¼ä¸Šæ¨“è«‹æ±‚ï¼‰
up_heap = []
# æœ€å¤§å †ï¼ˆç”¨æ–¼ä¸‹æ¨“è«‹æ±‚ï¼Œä½¿ç”¨è² æ•¸æ¨¡æ“¬ï¼‰
down_heap = []

for _ in range(n):
    request = sys.stdin.readline().strip().split()
    direction = request[0]
    floor = int(request[1])
    
    if direction == "UP":
        heapq.heappush(up_heap, floor)
    else:
        heapq.heappush(down_heap, -floor)  # è² æ•¸å¯¦ç¾æœ€å¤§å †

print("è™•ç†ä¸Šæ¨“è«‹æ±‚ï¼š")
while up_heap:
    floor = heapq.heappop(up_heap)
    print(f"æ¨“å±¤ {floor}")

print("\nè™•ç†ä¸‹æ¨“è«‹æ±‚ï¼š")
while down_heap:
    floor = -heapq.heappop(down_heap)  # è½‰å›æ­£æ•¸
    print(f"æ¨“å±¤ {floor}")
```

---

## ğŸ¯ è¨“ç·´å®Œæˆï¼

æ­å–œä½ å®Œæˆå¤©ç‹æ˜Ÿè²¨é‹ç³»çµ±è¨“ç·´ï¼ä½ ç¾åœ¨å·²ç¶“æŒæ¡ï¼š
- âœ… å †ç–Šï¼ˆStackï¼‰çš„å¯¦ç¾èˆ‡æ‡‰ç”¨
- âœ… ä½‡åˆ—ï¼ˆQueueï¼‰çš„å¯¦ç¾èˆ‡æ‡‰ç”¨
- âœ… collections.deque çš„ä½¿ç”¨
- âœ… æ‹¬è™Ÿé…å°å•é¡Œ
- âœ… é€†æ³¢è˜­è¡¨ç¤ºæ³•
- âœ… æ™‚é–“è¤‡é›œåº¦åˆ†æ

**ä¸‹ä¸€ç«™ï¼šæµ·ç‹æ˜Ÿæ·±åº¦æ¢ç´¢ - éè¿´èˆ‡å›æº¯æ³•ï¼**

---

## ğŸ”— APCS å°æ‡‰èƒ½åŠ›
- **ç´šåˆ†ç›®æ¨™**ï¼š4 ç´šåˆ†
- **è©•é‡é …ç›®**ï¼šå †ç–Šã€ä½‡åˆ—ã€åŸºç¤è³‡æ–™çµæ§‹
- **å°æ‡‰é¡Œå‹**ï¼šc471 (ç‰©å“å †ç–Š)ã€P-3-2 (æ‹¬è™Ÿé…å°)
- **æ ¸å¿ƒæŠ€èƒ½**ï¼šLIFO/FIFO çš„ç†è§£èˆ‡æ‡‰ç”¨
